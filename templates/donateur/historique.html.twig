{% extends 'layouts/dashboard_layout.html.twig' %}

{% block title %}Historique de mes Dons{% endblock %}

{% block page_title %}
    <i class="bi bi-clock-history"></i> Mon Historique de Dons
{% endblock %}

{% block dashboard_content %}

    {% if dons is empty %}
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i> Vous n'avez pas encore effectué de don enregistré.
        </div>
    {% else %}
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Liste de vos dons</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th>Date du Don</th>
                                <th>Type de Don</th>
                                <th>Quantité (ml)</th>
                                <th>Apte</th>
                                <th>Commentaire</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for don in dons %}
                                <tr>
                                    <td>
                                        <strong>{{ don.dateDon|date('d/m/Y') }}</strong><br>
                                        <small class="text-muted">{{ don.dateDon|date('H:i') }}</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-info">{{ don.typeDon }}</span>
                                    </td>
                                    <td>
                                        <strong>{{ don.quantite }}</strong> <small class="text-muted">ml</small>
                                    </td>
                                    <td>
                                        {% if don.apte %}
                                            <span class="badge bg-success fs-6">
                                                <i class="bi bi-check-circle"></i> Oui
                                            </span>
                                        {% else %}
                                            <span class="badge bg-danger fs-6">
                                                <i class="bi bi-x-circle"></i> Non
                                            </span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if don.commentaire %}
                                            <small>{{ don.commentaire }}</small>
                                        {% else %}
                                            <span class="text-muted">N/A</span>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer bg-light">
                <small class="text-muted">
                    <i class="bi bi-info-circle"></i> Total de dons enregistrés : <strong>{{ dons|length }}</strong>
                </small>
            </div>
        </div>
    {% endif %}

    <div class="mt-4">
        <a href="{{ path('app_donateur_dashboard') }}" class="btn btn-primary">
            <i class="bi bi-arrow-left"></i> Retour au Tableau de Bord
        </a>
    </div>
{% endblock dashboard_content %}
